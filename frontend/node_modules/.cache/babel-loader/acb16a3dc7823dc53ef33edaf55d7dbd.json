{"ast":null,"code":"var _jsxFileName = \"E:\\\\education\\\\Phyton\\\\Projercts\\\\my_course_works\\\\course_3\\\\src\\\\pages\\\\movie\\\\Movie.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"./Movie.module.scss\";\nimport { useParams } from 'react-router-dom';\nimport { useEffect, useState } from \"react\";\nimport { getMovies, getMovie } from \"../../api/movies\";\nimport { getYoutubePreview } from \"../../utils/utils\";\nimport Button from \"../../components/button/Button\";\nimport Heading from \"../../components/heading/Heading\";\nimport MovieCardSet from \"../../components/movieCardSet/MovieCardSet\";\nimport { deleteFavorites, getFavorites, setFavorites } from \"../../api/user\";\nimport { tokenChecker } from \"../../utils/token\";\nimport { getCookie } from \"../../utils/cookies\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Movie = () => {\n  _s();\n\n  const [movies, setMovies] = useState({\n    loading: true,\n    content: []\n  });\n  const [movie, setMovie] = useState({\n    loading: true,\n    content: {}\n  });\n  const [isBookmarked, setIsBookmarked] = useState(false);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    getFavorites().then(res => {\n      if (res.data.find(item => item.id === Number(id))) {\n        setIsBookmarked(true);\n      }\n    }).catch(error => {\n      console.error(error.response);\n    });\n  }, [id, isBookmarked]);\n  useEffect(() => {\n    getMovie(id).then(res => {\n      setMovie({\n        loading: false,\n        content: res.data\n      });\n    }).catch(error => {\n      console.log(error.response);\n    });\n    getMovies().then(res => {\n      setMovies({\n        loading: false,\n        content: res.data\n      });\n    }).catch(error => {\n      console.log(error.response);\n    });\n  }, [id]);\n\n  const toggleBookmark = () => {\n    isBookmarked ? deleteFavorites(id).then(() => {\n      setIsBookmarked(false);\n    }).catch(error => {\n      tokenChecker(error);\n      console.error(error.response);\n    }) : setFavorites(id).then(() => {\n      setIsBookmarked(true);\n    }).catch(error => {\n      tokenChecker(error);\n      console.error(error.response);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.Movie,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Cover,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Cover__information,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.Cover__title,\n          children: movie.content.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.Cover__data,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: movie.content.year\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: movie.content.rating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Cover__layer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), movie.content.trailer && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: getYoutubePreview(movie.content.trailer),\n        alt: \"Cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Movie__wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Movie__description,\n        children: movie.content.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Movie__actions,\n        children: [movie.content.trailer && /*#__PURE__*/_jsxDEV(Button, {\n          label: \"\\u0421\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C\",\n          type: \"dark\",\n          onClick: () => {\n            window.open(movie.content.trailer, \"_blank\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), getCookie(\"AccessToken\") && /*#__PURE__*/_jsxDEV(Button, {\n          label: isBookmarked ? \"Удалить из избранного\" : \"Добавить в избранное\",\n          type: \"dark\",\n          onClick: toggleBookmark\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Movie__selection,\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          label: \"\\u041F\\u043E\\u0445\\u043E\\u0436\\u0438\\u0435 \\u0444\\u0438\\u043B\\u044C\\u043C\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MovieCardSet, {\n          movies: movies.content.filter(item => item.genre.id === movie.content.genre.id),\n          limit: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Movie, \"+cr78U8LQvbb4UzjXby4AjWj5b8=\", false, function () {\n  return [useParams];\n});\n\n_c = Movie;\nexport default Movie;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movie\");","map":{"version":3,"sources":["E:/education/Phyton/Projercts/my_course_works/course_3/src/pages/movie/Movie.js"],"names":["styles","useParams","useEffect","useState","getMovies","getMovie","getYoutubePreview","Button","Heading","MovieCardSet","deleteFavorites","getFavorites","setFavorites","tokenChecker","getCookie","Movie","movies","setMovies","loading","content","movie","setMovie","isBookmarked","setIsBookmarked","id","then","res","data","find","item","Number","catch","error","console","response","log","toggleBookmark","Cover","Cover__information","Cover__title","title","Cover__data","year","rating","Cover__layer","trailer","Movie__wrapper","Movie__description","description","Movie__actions","window","open","Movie__selection","filter","genre"],"mappings":"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","sourcesContent":["import styles from \"./Movie.module.scss\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { useEffect, useState } from \"react\";\r\nimport { getMovies, getMovie } from \"../../api/movies\";\r\nimport { getYoutubePreview } from \"../../utils/utils\";\r\nimport Button from \"../../components/button/Button\";\r\nimport Heading from \"../../components/heading/Heading\";\r\nimport MovieCardSet from \"../../components/movieCardSet/MovieCardSet\";\r\nimport {deleteFavorites, getFavorites, setFavorites} from \"../../api/user\";\r\nimport {tokenChecker} from \"../../utils/token\";\r\nimport {getCookie} from \"../../utils/cookies\";\r\n\r\nexport const Movie = () => {\r\n  const [movies, setMovies] = useState({loading: true, content: []});\r\n  const [movie, setMovie] = useState({loading: true, content: {}});\r\n  const [isBookmarked, setIsBookmarked] = useState(false);\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    getFavorites()\r\n      .then(res => {\r\n        if (res.data.find(item => item.id === Number(id))) {\r\n          setIsBookmarked(true);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error.response);\r\n      })\r\n  }, [id, isBookmarked]);\r\n\r\n  useEffect(() => {\r\n    getMovie(id)\r\n      .then(res => {\r\n        setMovie({loading: false, content: res.data});\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response);\r\n      });\r\n\r\n    getMovies()\r\n      .then(res => {\r\n        setMovies({loading: false, content: res.data});\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response);\r\n      });\r\n  }, [id]);\r\n\r\n  const toggleBookmark = () => {\r\n    isBookmarked ?\r\n      deleteFavorites(id)\r\n        .then(() => {\r\n          setIsBookmarked(false);\r\n        })\r\n        .catch(error => {\r\n          tokenChecker(error);\r\n          console.error(error.response);\r\n        })\r\n      :\r\n      setFavorites(id)\r\n        .then(() => {\r\n          setIsBookmarked(true);\r\n        })\r\n        .catch(error => {\r\n          tokenChecker(error);\r\n          console.error(error.response);\r\n        })\r\n  };\r\n\r\n  return(\r\n    <div className={styles.Movie}>\r\n      <div className={styles.Cover}>\r\n        <div className={styles.Cover__information}>\r\n          <div className={styles.Cover__title}>{movie.content.title}</div>\r\n          <div className={styles.Cover__data}>\r\n            <span>{movie.content.year}</span><span>{movie.content.rating}</span>\r\n          </div>\r\n        </div>\r\n        <div className={styles.Cover__layer} />\r\n        {movie.content.trailer &&\r\n          <img src={getYoutubePreview(movie.content.trailer)} alt=\"Cover\"/>\r\n        }\r\n      </div>\r\n\r\n      <div className={styles.Movie__wrapper}>\r\n        <div className={styles.Movie__description}>\r\n          {movie.content.description}\r\n        </div>\r\n\r\n        <div className={styles.Movie__actions}>\r\n          {movie.content.trailer &&\r\n            <Button\r\n              label=\"Смотреть\"\r\n              type=\"dark\"\r\n              onClick={() => {\r\n                window.open(movie.content.trailer, \"_blank\");\r\n              }}\r\n            />\r\n          }\r\n          {getCookie(\"AccessToken\") &&\r\n            <Button\r\n              label={isBookmarked ? \"Удалить из избранного\" : \"Добавить в избранное\"}\r\n              type=\"dark\"\r\n              onClick={toggleBookmark}\r\n            />}\r\n        </div>\r\n\r\n        <div className={styles.Movie__selection}>\r\n          <Heading label=\"Похожие фильмы\"/>\r\n          <MovieCardSet\r\n            movies={movies.content.filter(item => item.genre.id === movie.content.genre.id)}\r\n            limit={4}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Movie;"]},"metadata":{},"sourceType":"module"}